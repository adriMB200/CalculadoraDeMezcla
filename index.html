<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="imagen/img.jpg" />

    <title>Calculadora de Mezcla y Ficha Técnica</title>
    <link rel="stylesheet" href="estilo.css">
</head>

<body>

    <div class="calculator">
        <h1>Calculadora de Mezcla</h1>
        <h2>Enduro Nalon</h2>

        <div id="display">0</div>

        <div class="keypad">
            <button onclick="appendDisplay('7')">7</button>
            <button onclick="appendDisplay('8')">8</button>
            <button onclick="appendDisplay('9')">9</button>

            <button onclick="appendDisplay('4')">4</button>
            <button onclick="appendDisplay('5')">5</button>
            <button onclick="appendDisplay('6')">6</button>

            <button onclick="appendDisplay('1')">1</button>
            <button onclick="appendDisplay('2')">2</button>
            <button onclick="appendDisplay('3')">3</button>

            <button onclick="appendDisplay('0')">0</button>
            <button onclick="appendDisplay(',')">,</button>

            <button class="operator" onclick="setVolume()">Volumen (L)</button>
            <button class="operator" onclick="setPercentage()">% Deseado</button>
            <button class="clear" onclick="clearCalculator()">C (Borrar)</button>
        </div>

        <div id="result-container">
            <p><strong>Volumen Total:</strong> <span id="volume-output">0</span> L</p>
            <p><strong>Porcentaje Deseado:</strong> <span id="percentage-output">0</span> %</p>
            <p><strong>Resultado (Cantidad a Añadir):</strong> <span id="result-output">0</span> ml</p>
        </div>
    </div>

    <div class="info-container">
        <h2>Ficha Técnica Rápida KTM & GASGAS (Enduro/Motocross)</h2>

        <div class="note">
            ⚠️ **AVISO IMPORTANTE:** Estos son valores de referencia. **DEBES CONSULTAR SIEMPRE** el manual de servicio
            oficial de tu modelo específico (año y cilindrada) para obtener el par de apriete exacto.
        </div>

        <table>
            <thead>
                <tr>
                    <th colspan="3" class="nm-header">PARES DE APRIETE (Nm)</th>
                </tr>
                <tr>
                    <th>Componente del Motor GASGAS 2004-2006</th>
                    <th>Valor (Nm)</th>
                    <th>Comentarios (Aluminio)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>**Tuercas Aceite**</td>
                    <td>**20Nm**</td>
                    <td>Par bajo esencial en cárteres. Utilizar dinamométrica.</td>
                </tr>
                <tr>
                    <td>**Tornillos base cilindro**</td>
                    <td>**25 Nm**</td>
                    <td></td>
                </tr>
                <tr>
                    <td>**Tornillos culata**</td>
                    <td>**25 Nm**</td>
                    <td>Recomendable sustituir arandelas de cobre</td>
                </tr>
                <tr>
                    <td>**Tornillos Tapa de Embrague**</td>
                    <td>**10 Nm**</td>
                    <td></td>
                </tr>
            </tbody>
            <thead>
                <tr>
                    <th colspan="3" class="ml-header">CAPACIDAD ACEITE CAJA DE CAMBIOS (ml)</th>
                </tr>
                <tr>
                    <th>Modelo (Ejemplo de Referencia)</th>
                    <th>Capacidad (ml)</th>
                    <th>Tipo de Aceite Común</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>**KTM (Caja de Cambios)**</td>
                    <td>**800 ml**</td>
                </tr>
                <tr>
                    <td>**GASGAS (Caja de Cambios)**</td>
                    <td>**900 ml**</td>
                    <td>Recomendado por Angel hechar 1L</td>
                </tr>

            </tbody>
            <thead>
                <tr>
                    <th colspan="3" class="ml-header">MANUALES DE USUARIO Y TALLER</th>
                </tr>
                <tr>
                    <th>Modelo</th>
                    <th>Manual usuario</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>GASGAS EC 2004-2006</td>
                    <td><a href="https://www.motocrosscenter.com/pdf_manual_gasgas/2005_ec2t_manual_es.pdf"
                            target="_blank">Descargar</a></td>
                </tr>
                <tr>
                    <td>GASGAS EC 2018</td>
                    <td><a href="https://www.motocrosscenter.com/pdf_manual_gasgas/18-11-08-mu-gasgas-2t-ec-18v3---esp.pdf"
                            target="_blank">Descargar</a></td>
                </tr>

            </tbody>
        </table>

        <div class="note">
            ⚙️ **Consejo:** Usar una **llave dinamométrica** es obligatorio para evitar barrer las roscas o fisurar los
            cárteres de aluminio. Un par de apriete incorrecto compromete la fiabilidad del motor.
        </div>
    </div>


    <script>
        let currentVolume = 0;
        let currentPercentage = 0;
        let display = document.getElementById('display');
        const volumeOutput = document.getElementById('volume-output');
        const percentageOutput = document.getElementById('percentage-output');
        const resultOutput = document.getElementById('result-output');

        // Inicializar el display
        clearDisplay();

        function clearDisplay() {
            display.textContent = '0';
        }

        function clearCalculator() {
            currentVolume = 0;
            currentPercentage = 0;
            clearDisplay();
            updateOutputs();
        }

        function appendDisplay(value) {
            if (display.textContent === '0' || display.textContent === 'Error') {
                display.textContent = value === '.' || value === ',' ? '0' + value.replace(',', '.') : value;
            } else {
                const internalValue = value.replace(',', '.');
                if (internalValue === '.' && display.textContent.includes('.')) {
                    return;
                }
                display.textContent += value;
            }
        }

        function calculateResult() {
            if (currentVolume > 0 && currentPercentage > 0) {
                const resultInLiters = currentVolume * (currentPercentage / 100);
                const resultInMl = Math.round(resultInLiters * 1000 * 100) / 100;
                resultOutput.textContent = resultInMl.toLocaleString('es-ES');
            } else {
                resultOutput.textContent = '0';
            }
        }

        function updateOutputs() {
            volumeOutput.textContent = currentVolume.toLocaleString('es-ES', { maximumFractionDigits: 2 });
            percentageOutput.textContent = currentPercentage.toLocaleString('es-ES', { maximumFractionDigits: 2 });
            calculateResult();
            clearDisplay();
        }

        function setVolume() {
            const value = parseFloat(display.textContent.replace(',', '.'));
            if (!isNaN(value) && value >= 0) {
                currentVolume = value;
                updateOutputs();
            } else {
                display.textContent = 'Error';
                setTimeout(clearDisplay, 1000);
            }
        }

        function setPercentage() {
            const value = parseFloat(display.textContent.replace(',', '.'));
            if (!isNaN(value) && value >= 0) {
                currentPercentage = value;
                updateOutputs();
            } else {
                display.textContent = 'Error';
                setTimeout(clearDisplay, 1000);
            }
        }
    </script>

</body>


</html>
